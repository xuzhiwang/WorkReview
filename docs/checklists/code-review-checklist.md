# 代码评审检查清单

## 使用说明
- 本检查清单适用于C++跨平台SDK项目的代码评审
- 评审者应逐项检查，确保代码质量
- 对于不适用的项目，可标记为"N/A"
- 发现问题时，应提供具体的修改建议

## 基础质量检查

### 代码规范 ✓
- [ ] 代码符合团队编码规范
- [ ] 变量和函数命名清晰明确，遵循命名约定
- [ ] 缩进和格式化正确
- [ ] 注释充分且准确，包括函数说明和复杂逻辑解释
- [ ] 没有调试代码残留（如printf、cout等）
- [ ] 没有注释掉的代码块
- [ ] 文件头部包含适当的版权和许可信息

### 编译和构建 ✓
- [ ] 代码编译无错误
- [ ] 代码编译无警告（或警告已被适当处理）
- [ ] 新增的依赖已正确添加到构建系统
- [ ] 跨平台编译兼容性检查通过
- [ ] 静态代码分析工具检查通过

## C++特定检查

### 内存管理 ✓
- [ ] 使用智能指针管理动态内存，避免裸指针
- [ ] 遵循RAII原则，资源获取即初始化
- [ ] 没有内存泄漏风险
- [ ] 没有悬空指针或野指针
- [ ] 数组访问有边界检查
- [ ] 正确使用new/delete或malloc/free配对
- [ ] 避免重复释放同一内存

### 线程安全 ✓
- [ ] 共享数据有适当的同步机制保护
- [ ] 锁的获取和释放正确配对
- [ ] 没有明显的死锁风险
- [ ] 锁的粒度合理，避免性能问题
- [ ] 正确使用原子操作
- [ ] 线程局部存储使用正确
- [ ] 避免竞态条件

### 异常安全 ✓
- [ ] 异常安全级别明确（基本保证/强保证/不抛异常保证）
- [ ] 资源清理在异常情况下得到保证
- [ ] 异常传播正确，不会导致程序崩溃
- [ ] noexcept说明符使用恰当
- [ ] 异常处理完整，不吞掉异常
- [ ] 构造函数和析构函数的异常安全性

### 现代C++特性 ✓
- [ ] 适当使用auto关键字
- [ ] 使用范围for循环替代传统for循环
- [ ] 支持移动语义，避免不必要的拷贝
- [ ] 使用constexpr提高编译时计算
- [ ] 使用nullptr替代NULL
- [ ] 使用强类型枚举（enum class）
- [ ] 适当使用lambda表达式

## 逻辑正确性检查

### 算法和逻辑 ✓
- [ ] 算法逻辑正确，满足需求
- [ ] 边界条件处理完整（空值、边界值、极值）
- [ ] 循环条件正确，避免无限循环
- [ ] 递归有正确的终止条件
- [ ] 数学运算考虑溢出和精度问题
- [ ] 字符串操作安全，避免缓冲区溢出

### 错误处理 ✓
- [ ] 函数返回值检查完整
- [ ] 输入参数验证充分
- [ ] 错误码或异常使用一致
- [ ] 错误信息清晰明确
- [ ] 失败情况下的资源清理
- [ ] 网络和I/O操作的错误处理

### 数据结构使用 ✓
- [ ] 选择合适的数据结构
- [ ] 容器使用正确，考虑性能特性
- [ ] 迭代器使用安全，避免失效
- [ ] 容器大小检查，避免越界访问
- [ ] 正确处理容器的生命周期

## 性能考虑

### 性能优化 ✓
- [ ] 没有明显的性能问题
- [ ] 算法复杂度合理
- [ ] 避免不必要的对象拷贝
- [ ] 字符串操作高效
- [ ] 避免频繁的内存分配和释放
- [ ] 循环优化，避免重复计算
- [ ] 缓存策略合理

### 资源使用 ✓
- [ ] 内存使用效率高
- [ ] CPU使用率合理
- [ ] I/O操作优化
- [ ] 网络资源使用合理
- [ ] 文件句柄和连接及时释放

## 跨平台兼容性

### 平台特定代码 ✓
- [ ] 平台特定代码有明确的条件编译
- [ ] 支持的平台列表明确
- [ ] 平台差异处理正确
- [ ] 字节序处理正确
- [ ] 路径分隔符处理正确
- [ ] 字符编码处理正确

### API兼容性 ✓
- [ ] 使用的API在目标平台上可用
- [ ] 版本兼容性考虑充分
- [ ] 依赖库的平台支持确认
- [ ] 编译器特性兼容性检查

## 安全性检查

### 安全编程 ✓
- [ ] 输入验证和清理
- [ ] 缓冲区溢出防护
- [ ] 格式化字符串安全
- [ ] 整数溢出检查
- [ ] 敏感信息保护
- [ ] 加密和哈希使用正确

### 权限和访问控制 ✓
- [ ] 文件权限设置合理
- [ ] 网络访问控制适当
- [ ] 用户权限检查
- [ ] 资源访问限制

## 可维护性检查

### 代码结构 ✓
- [ ] 函数长度合理（建议不超过50行）
- [ ] 类的职责单一
- [ ] 模块划分清晰
- [ ] 接口设计合理
- [ ] 依赖关系清晰

### 可读性 ✓
- [ ] 代码逻辑清晰易懂
- [ ] 复杂逻辑有充分注释
- [ ] 魔法数字使用常量替代
- [ ] 代码重复度低
- [ ] 变量作用域合理

### 可测试性 ✓
- [ ] 代码易于单元测试
- [ ] 依赖注入使用合理
- [ ] 接口和实现分离
- [ ] 测试覆盖率考虑

## 文档和测试

### 文档完整性 ✓
- [ ] API文档完整准确
- [ ] 使用示例清晰
- [ ] 变更日志更新
- [ ] README文件更新

### 测试覆盖 ✓
- [ ] 单元测试覆盖新增代码
- [ ] 测试用例覆盖主要场景
- [ ] 边界条件测试
- [ ] 错误情况测试
- [ ] 性能测试考虑

## 特殊检查项

### 多线程相关 ✓
- [ ] 线程创建和销毁正确
- [ ] 线程池使用合理
- [ ] 任务队列设计正确
- [ ] 线程间通信安全
- [ ] 线程同步机制正确

### 网络编程 ✓
- [ ] 网络连接管理正确
- [ ] 超时处理完整
- [ ] 重连机制合理
- [ ] 协议实现正确
- [ ] 网络安全考虑

### 文件I/O ✓
- [ ] 文件操作异常处理
- [ ] 文件锁使用正确
- [ ] 大文件处理优化
- [ ] 文件权限检查
- [ ] 临时文件清理

## 评审总结

### 问题分类统计
- 严重问题（必须修复）: ___个
- 重要问题（建议修复）: ___个
- 一般问题（可选修复）: ___个
- 建议改进: ___个

### 总体评价
- [ ] 代码质量优秀，可以合并
- [ ] 代码质量良好，修复问题后可以合并
- [ ] 代码质量一般，需要重大修改
- [ ] 代码质量较差，建议重新设计

### 评审意见
[在此处填写详细的评审意见和建议]

---

**评审者**: [姓名]  
**评审时间**: [YYYY-MM-DD HH:MM]  
**评审耗时**: [X小时Y分钟]  
**代码行数**: [XXX行]
